## divert

[![Travis CI](http://img.shields.io/travis/ypid/ansible-divert.svg?style=flat)](http://travis-ci.org/ypid/ansible-divert)


Simple role for package management aware renaming of files.

Allows to move files which were installed by a package and to inform the package manager about the change so that it can do the right thing when the moved file is later installed again by a package upgrade. The right thing in this context is to map all new versions to the diverted location and to avoid touching the original file location.

This role is intended to work with all package managers which can be informed about such changes.

### Currently supported packages managers

* [dpkg](https://en.wikipedia.org/wiki/Dpkg)




### Role variables

List of default variables available in the inventory:

    ---
    
    # original (string, required): File path of the original file.
    # diverted (string, optional, default: original + diverted_files_default_suffix): File path where all new file versions created by package updates are redirected to.
    # state (string, optional, default: 'present'): If 'present', the diversion should be enabled. If 'absent' the diversion will be removed.
    # force (boolean, optional, default: no): If true and state is 'absent' the diversion will be removed even if that means that your modified file has to be deleted first to restore the original version of the package maintainer.
    
    ## "Global" list of files to divert
    divert_files_list: []
    # divert_files_list:
    #   - original: '/bin/ls'
    #     diverted: '/bin/ls_org'
    #     copy: yes
    #     ## Copy the diverted file to the original file (intended when the file is later going to be modified).
    #     # state: 'absent'
    #   - original: '/usr/share/X11/xkb/symbols/de'
    #     state: 'absent'
    #     force: yes
    #     ## Force the removal of the diversion by removing the file which is in place of the original file.
    
    ## "Host group" list of files to divert
    divert_files_group_list: []
    
    ## "Host" list of files to divert
    divert_files_host_list: []
    
    diverted_files_default_suffix: '.diverted'

List of internal variables used by the role:

    divert_files_list_combined


### Authors and license

`divert` role was written by:

- [Robin Schneider](https://github.com/ypid) | [e-mail](mailto:ypid@riseup.net)

License: [AGPLv3](https://tldrlegal.com/license/gnu-affero-general-public-license-v3-%28agpl-3.0%29)

***

README generated by [Ansigenome](https://github.com/nickjj/ansigenome/).
